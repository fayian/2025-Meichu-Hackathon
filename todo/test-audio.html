<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Audio Test - MX Creative Console</title>
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: #0d1117;
            color: #f0f6fc;
            padding: 2rem;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .test-container {
            background: rgba(33, 38, 45, 0.8);
            border-radius: 16px;
            padding: 2rem;
            border: 1px solid #30363d;
        }
        
        h1 {
            color: #4ecdc4;
            text-align: center;
            margin-bottom: 2rem;
        }
        
        .test-button {
            display: block;
            width: 100%;
            padding: 1rem;
            margin: 1rem 0;
            background: #4ecdc4;
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 1rem;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        .test-button:hover {
            background: #45b7ae;
            transform: translateY(-2px);
        }
        
        .status {
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 8px;
            text-align: center;
        }
        
        .status.success {
            background: rgba(78, 205, 196, 0.2);
            border: 1px solid #4ecdc4;
        }
        
        .status.error {
            background: rgba(255, 82, 82, 0.2);
            border: 1px solid #ff5252;
        }
        
        .info {
            background: rgba(33, 38, 45, 0.8);
            border: 1px solid #30363d;
            border-radius: 8px;
            padding: 1rem;
            margin: 1rem 0;
            font-size: 0.9rem;
            color: #8b949e;
        }
    </style>
</head>
<body>
    <div class="test-container">
        <h1>ğŸ… ç•ªèŒ„é˜éŸ³æ•ˆæ¸¬è©¦</h1>
        
        <div class="info">
            <p><strong>ä½¿ç”¨èªªæ˜ï¼š</strong></p>
            <ul>
                <li>é»æ“Šå„å€‹æŒ‰éˆ•æ¸¬è©¦ä¸åŒçš„éŸ³æ•ˆ</li>
                <li>ç¢ºä¿ç€è¦½å™¨å…è¨±æ’­æ”¾éŸ³æ•ˆ</li>
                <li>å¦‚æœæ²’æœ‰è²éŸ³ï¼Œè«‹æª¢æŸ¥éŸ³é‡è¨­å®š</li>
                <li>ç¾ä»£ç€è¦½å™¨éœ€è¦ç”¨æˆ¶äº¤äº’å¾Œæ‰èƒ½æ’­æ”¾éŸ³æ•ˆ</li>
            </ul>
        </div>
        
        <button class="test-button" onclick="testSound('complete')">
            ğŸ‰ æ¸¬è©¦å®ŒæˆéŸ³æ•ˆ (3è²é•·éŸ³)
        </button>
        
        <button class="test-button" onclick="testSound('start')">
            â–¶ï¸ æ¸¬è©¦é–‹å§‹éŸ³æ•ˆ
        </button>
        
        <button class="test-button" onclick="testSound('pause')">
            â¸ï¸ æ¸¬è©¦æš«åœéŸ³æ•ˆ
        </button>
        
        <button class="test-button" onclick="testBrowserNotification()">
            ğŸ”” æ¸¬è©¦ç€è¦½å™¨é€šçŸ¥
        </button>
        
        <button class="test-button" onclick="requestPermissions()">
            ğŸ”“ è«‹æ±‚é€šçŸ¥æ¬Šé™
        </button>
        
        <div id="status" class="status" style="display: none;"></div>
        
        <div id="timer-test" style="margin-top: 2rem; text-align: center;">
            <h3>å¿«é€Ÿè¨ˆæ™‚å™¨æ¸¬è©¦ (5ç§’)</h3>
            <button class="test-button" onclick="startQuickTimer()">
                â±ï¸ é–‹å§‹5ç§’æ¸¬è©¦è¨ˆæ™‚å™¨
            </button>
            <div id="timer-display" style="font-size: 2rem; margin: 1rem 0; color: #4ecdc4;"></div>
        </div>
    </div>

    <script>
        // éŸ³æ•ˆæ’­æ”¾å‡½æ•¸ (è¤‡è£½è‡ªä¸»æ‡‰ç”¨ç¨‹å¼)
        function playSound(type) {
            try {
                const audioContext = new (window.AudioContext || window.webkitAudioContext)();
                const volume = 0.1;
                
                let frequency, duration, pattern;
                
                switch(type) {
                    case 'complete':
                        frequency = 800;
                        duration = 0.5;
                        pattern = [0, 0.6, 1.2];
                        break;
                    case 'start':
                        frequency = 600;
                        duration = 0.3;
                        pattern = [0];
                        break;
                    case 'pause':
                        frequency = 400;
                        duration = 0.2;
                        pattern = [0];
                        break;
                    default:
                        frequency = 500;
                        duration = 0.2;
                        pattern = [0];
                }
                
                pattern.forEach((delay, index) => {
                    setTimeout(() => {
                        const osc = audioContext.createOscillator();
                        const gain = audioContext.createGain();
                        
                        osc.connect(gain);
                        gain.connect(audioContext.destination);
                        
                        osc.frequency.setValueAtTime(frequency, audioContext.currentTime);
                        gain.gain.setValueAtTime(0, audioContext.currentTime);
                        gain.gain.linearRampToValueAtTime(volume, audioContext.currentTime + 0.01);
                        gain.gain.linearRampToValueAtTime(0, audioContext.currentTime + duration);
                        
                        osc.start(audioContext.currentTime);
                        osc.stop(audioContext.currentTime + duration);
                    }, delay * 1000);
                });
                
                showStatus(`éŸ³æ•ˆæ’­æ”¾æˆåŠŸ: ${type}`, 'success');
            } catch (error) {
                console.error('éŸ³æ•ˆæ’­æ”¾å¤±æ•—:', error);
                showStatus(`éŸ³æ•ˆæ’­æ”¾å¤±æ•—: ${error.message}`, 'error');
            }
        }
        
        function testSound(type) {
            playSound(type);
        }
        
        function testBrowserNotification() {
            if ('Notification' in window) {
                if (Notification.permission === 'granted') {
                    new Notification('ğŸ… æ¸¬è©¦é€šçŸ¥', {
                        body: 'é€™æ˜¯ä¸€å€‹æ¸¬è©¦é€šçŸ¥ï¼Œç¢ºèªç€è¦½å™¨é€šçŸ¥åŠŸèƒ½æ­£å¸¸ï¼',
                        icon: '/favicon.ico'
                    });
                    showStatus('é€šçŸ¥ç™¼é€æˆåŠŸï¼', 'success');
                } else {
                    showStatus('è«‹å…ˆå…è¨±é€šçŸ¥æ¬Šé™', 'error');
                }
            } else {
                showStatus('ç€è¦½å™¨ä¸æ”¯æ´é€šçŸ¥åŠŸèƒ½', 'error');
            }
        }
        
        function requestPermissions() {
            if ('Notification' in window) {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        showStatus('é€šçŸ¥æ¬Šé™å·²ç²å¾—ï¼', 'success');
                    } else {
                        showStatus('é€šçŸ¥æ¬Šé™è¢«æ‹’çµ•', 'error');
                    }
                });
            } else {
                showStatus('ç€è¦½å™¨ä¸æ”¯æ´é€šçŸ¥åŠŸèƒ½', 'error');
            }
        }
        
        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.className = 'status ' + type;
            status.style.display = 'block';
            
            setTimeout(() => {
                status.style.display = 'none';
            }, 3000);
        }
        
        // å¿«é€Ÿè¨ˆæ™‚å™¨æ¸¬è©¦
        let testTimer = null;
        
        function startQuickTimer() {
            if (testTimer) {
                clearInterval(testTimer);
            }
            
            let remaining = 5;
            const display = document.getElementById('timer-display');
            
            display.textContent = `${remaining}ç§’`;
            showStatus('5ç§’æ¸¬è©¦è¨ˆæ™‚å™¨é–‹å§‹', 'success');
            
            testTimer = setInterval(() => {
                remaining--;
                display.textContent = `${remaining}ç§’`;
                
                if (remaining <= 0) {
                    clearInterval(testTimer);
                    display.textContent = 'å®Œæˆï¼';
                    playSound('complete');
                    testBrowserNotification();
                    showStatus('æ¸¬è©¦è¨ˆæ™‚å™¨å®Œæˆï¼éŸ³æ•ˆå’Œé€šçŸ¥å·²è§¸ç™¼', 'success');
                    
                    setTimeout(() => {
                        display.textContent = '';
                    }, 3000);
                }
            }, 1000);
        }
        
        // é é¢è¼‰å…¥æ™‚é¡¯ç¤ºç³»çµ±è³‡è¨Š
        window.addEventListener('load', () => {
            console.log('éŸ³æ•ˆæ¸¬è©¦é é¢è¼‰å…¥å®Œæˆ');
            
            // æª¢æŸ¥æ”¯æ´åŠŸèƒ½
            const features = [];
            if (window.AudioContext || window.webkitAudioContext) {
                features.push('âœ… Web Audio API');
            } else {
                features.push('âŒ Web Audio API');
            }
            
            if ('Notification' in window) {
                features.push(`âœ… ç€è¦½å™¨é€šçŸ¥ (${Notification.permission})`);
            } else {
                features.push('âŒ ç€è¦½å™¨é€šçŸ¥');
            }
            
            console.log('æ”¯æ´åŠŸèƒ½:', features.join(', '));
        });
    </script>
</body>
</html>